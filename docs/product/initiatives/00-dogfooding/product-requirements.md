# Coffee AI Mentor - dogfooding - Product Requirements

- [1. 目的](#1-目的)
  - [1.1 ビジョン](#11-ビジョン)
  - [1.2 背景](#12-背景)
  - [1.3 対象ユーザー・ペルソナ](#13-対象ユーザーペルソナ)
  - [1.4 問題定義](#14-問題定義)
- [2. 目標](#2-目標)
- [3. 提供価値](#3-提供価値)
- [4. 成功指標](#4-成功指標)
  - [4.1 主指標](#41-主指標)
  - [4.2 副指標](#42-副指標)
  - [4.3 補助指標](#43-補助指標)
- [5. スコープ](#5-スコープ)
  - [5.1 Goals](#51-goals)
  - [5.2 Non-Goals](#52-non-goals)
  - [5.3 対象ユーザーシナリオ](#53-対象ユーザーシナリオ)
- [6. 前提条件](#6-前提条件)
  - [6.1 制約](#61-制約)
  - [6.2 方針](#62-方針)
- [7. 機能要件](#7-機能要件)
- [8. 非機能要件](#8-非機能要件)
- [9. 画面遷移](#9-画面遷移)
- [10. 計測・実験](#10-計測実験)
- [11. リスク](#11-リスク)
- [12. 未解決の問い](#12-未解決の問い)

## 1. 目的

<!-- なぜ作るのか -->
<!-- ドキュメント寿命に差があるため、別ドキュメントに切り離す -->

- 詳細は[Visionドキュメント](../../_overview/product-vision-and-problem-definition.md)を参照

### 1.1 ビジョン

- 初級〜準中級者の自宅コーヒー愛好家が「なんとなく美味しい」を卒業し、  
  自分の言葉で「なぜ美味しい」「こうやったら美味しい」を説明できるようになることを目指す。

### 1.2 背景

- スペシャルティコーヒー市場は拡大中
- コーヒーログアプリは手作業のみで、ほぼ玄人向け
- チャット型のAIコーチはヘルスケアやライフコーチング分野では急伸中

### 1.3 対象ユーザー・ペルソナ

- 自宅でコーヒーを淹れる初級〜準中級者
- 豆はいつも同じ、ハンドドリップで淹れる
- 味の言語化力や、思い通りに抽出するノウハウは持っていない

### 1.4 問題定義

- 初級〜準中級者の自宅コーヒー愛好家が味の弁別能力を磨く目的に適した手軽な学習機会がない

## 2. 目標

<!-- ビジョンのうち、本フェーズで「検証したい仮説」や「達成したい状態」を具体的に -->

- 初級〜準中級者の自宅コーヒー愛好家向けの最小限の「AIチャット付きコーヒーノート」を実現するため、  
  自分自身がまず使えるようにし、使用感を確認する
  - 毎日の一杯を簡単に記録
  - AIとの対話を通じて味を言語化
  - 自分の好みと上達を実感できる

## 3. 提供価値

<!-- ユーザーが得られる具体的なメリット -->

- AIのアドバイスとメンタリングで、即時的に適切なフィードバックを受け取ることで、  
  味の言語化・好みに合わせた再現性のある抽出ができるようになる。
- 味の好みや言語化、抽出技術の成長がビジュアルでも可視化されることで、  
  成長を実感しながら楽しくコーヒーがわかるようになる。
- 初心者にも分かりやすいシンプルな評価方法だが、プロのcuppingの一部の観点  
  （香り・酸・甘み・ボディなど）を取り入れており、より深く学ぶときの心理的負担が減る。

## 4. 成功指標

<!-- ユーザーが狙ったメリットが得られていると見なせる定量的な判断基準 -->

### 4.1 主指標

<!-- 最も重視するKPI -->

- 習慣化しやすさ
  - 1回の記録フローが、平均5分以内で完了している
  - 記録を開始後、80%以上が評価まで完了している

### 4.2 副指標

<!-- 主指標を補完するKPI -->

- 成長の実感
  - 味の言語化力の自己評価（5段階）が、1杯目と5杯目の評価を比較して+1以上
  - 最初の5杯と次の5杯の評価の形容詞のユニーク語彙数が2倍増加

### 4.3 補助指標

<!-- その他KPI -->

- 満足度
  - 初回利用から4週間後に「このアプリは自分のコーヒー体験を良くしている」と  
    自分が4以上の評価（5段階）をつけられる。
  - コーヒー好きな友人・知人に「ちょっと使ってみる？」と言いたくなる

## 5. スコープ

<!-- このフェーズで解決する範囲と、あえて扱わない範囲の明確化（エピックレベル） -->

**自分自身が毎日使いたくなるレベルの「AIチャット付きコーヒーノート」を完成させる。**

### 5.1 Goals

<!-- Must・Nice to haveを -->

- Must
  - 1杯あたりベースの記録は2分以内、AIとのやりとりを含めても5分以内で完了する体験を実装する
  - 言語で、一定期間の味覚や再現性の成長や移ろいの簡易的な可視化を可能にする

- Nice to have
  - ビジュアルで、一定期間の味覚や再現性の成長や移ろいの簡易的な可視化を可能にする

### 5.2 Non-Goals

<!-- 将来的にやりたい・ユーザーからニーズはありそうだが、今はやらないものを -->

- プロのQグレーダーが使うレベルの精緻なcupping評価の再現
- AIによる自動記入

### 5.3 対象ユーザーシナリオ

<!-- 柔軟性のため、対象とするシナリオとアクティビティのみ決める -->

- Scenario 1：利用者がアプリの存在を知ってから、継続をジャッジするまで
  - Activity 1-3：初回セットアップを最小ストレスで完了する
  - Activity 1-4：ガイド付きの「最初の1杯」を記録し、AIメンターとの体験を一度味わう
  - Activity 1-5：数回の利用を通じて、負荷と楽しさ・有用性のバランスを見極める
- ※ユーザーシナリオの全体像は[ユーザーストーリーマップドキュメント](../../_overview/user-story-map-backbone.md)を参照

## 6. 前提条件

<!-- 本フェーズであらかじめ合意しておく条件 -->

### 6.1 制約

<!-- リソース・期間・予算・技術選定など、変更しづらい条件 -->

- 個人開発である。
- 環境利用コスト（クラウド・AI APIなど）を極力抑える。
- 初期フェーズでは、大規模マネタイズやグローバル展開の検証はしない。

### 6.2 方針

<!-- 意思決定の優先順位や設計思想など、「迷ったときの判断基準」 -->

- 長期的な開発や機能拡張を見据え、初期フェーズから拡張を阻害しない構造を意識する

## 7. 機能要件

<!-- 機能要件はストーリー単位のissueとして管理する -->

- 対象ストーリー issue 一覧は GitHub Projectsを参照  
  ※機能要件はユーザーストーリー issue（`type: story`）として管理する。

## 8. 非機能要件

<!-- ドキュメント寿命に差があるため、別ドキュメントに切り離す -->

- 詳細は以下のドキュメントを参照
  - [横断的関心事（セキュリティ・監視・認証など）](../../../architecture/cross-cutting-concerns.md)
  - [CI/CD・テスト戦略](../../../process/ci-cd-and-test-strategy.md)

- 本フェーズ（dogfooding）の最低限要件
  - 認証・セキュリティ
    - Firebase Authentication + session cookie を用いた認証を成立させる
    - Cookie 認証の基本防御（CSRF 対策、Cookie 安全属性、危険操作時の recent login 条件）を実装する
  - 品質保証
    - 認証機能の主要フローをユニットテスト / 統合テスト / E2E テストで検証できる状態にする
  - 可観測性
    - 例外・障害を検知できるよう、Sentry によるエラー監視と死活監視を行う
    - Cloud Logging にリクエスト単位の構造化ログ（`request.summary`）を出力する
  - 運用・コスト
    - 個人開発で継続可能な範囲のランニングコストを優先し、重い運用基盤は段階的に導入する

## 9. 画面遷移

<!-- ドキュメント寿命に差があるため、別ドキュメントに切り離す -->

- 詳細は[画面遷移・状態管理ドキュメント](../../../architecture/ui-rendering-and-state.md)を参照

## 10. 計測・実験

<!-- 成功指標をどのように計測し、どんなイベントをログとして送るか -->

- 指標は[4. 成功指標](#4-成功指標)の定義に紐付けて集計。

## 11. リスク

<!-- 想定される重大な失敗パターンと注意すべきシナリオ -->

- コーヒー初心者が、そもそも「評価・言語化」にそこまで時間を使いたがらない可能性。
- ChatGPT+普通のメモアプリで十分、と感じられてしまうリスク。
- コーヒー玄人から見ると「内容が浅い」と評価される一方、  
  初心者には「少し難しい」と感じられる中途半端なポジションになるリスク。
- 継続的な開発時間・ランニングコスト（AI API料金など）を確保できず、  
  MVPリリース後に品質改善が止まってしまうリスク。

## 12. 未解決の問い

<!-- 今後の実験・検証の焦点となる重要な問い -->

- どの程度の「質問量」「評価軸」が、初級〜準中級者にとってちょうど良い負荷なのか？
- SCA cupping由来のスコアリングをどこまで取り入れ、どこからオリジナル指標にするのか？
